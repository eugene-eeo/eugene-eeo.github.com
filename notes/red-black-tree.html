<!doctype html><meta charset=utf-8><style>body{font-family:Georgia,serif;font-size:16px;width:35em;margin:3em auto}code,pre{font-family:Inconsolata,Menlo,Consolas,monospace}li{margin:.5em 0}.has-jax{font:inherit;font-size:90%}h1,h2,h3{font-weight:400}hr{background-color:#000;border:0;height:1px}.footnotes{margin-top:5em;font-size:.75em}table{border-collapse:collapse}th{background-color:#EEE}td,th{border:1px solid #000;padding:.2em .5em}</style><title>Red Black Trees</title><h1>Red Black Trees</h1><p>Properties:<ul><li>Balanced binary search tree.<li>Every node is either Red or Black.<li>All leaf nodes are black.<li>Children of a Red node must be Black.<li>Same number of black nodes from root to any leaf.</ul><h2>Height Analysis</h2><p>Let <code>$ B $</code> = number of black nodes from the root to the nearest leaf. Then <code>$ B $</code> is also the number of black nodes from root to the furthest leaf. The length of the longest path is then <code>$ 2B $</code> (black-red-black-red-&hellip;). Hence we claim that the depth <code>$ d \leq 2B $</code>. Bounding <code>$ B $</code> is simple:<p><code>$$ \begin{aligned} n &amp;= \sum^{B-1}_{d=0}{2^d} = 2^B - 1 \\ B &amp;= \log_2{(n+1)} \end{aligned} $$</code><p>Then we see that <code>$ d \leq 2\log_2{(n+1)} $</code>, as expected.<h2>Alternative Height Analysis</h2><p>Let:<ul><li><code>$ N(v) $</code> = minimum no. of internal nodes of the subtree rooted at <code>$ v $</code>.<li><code>$ bh(v) $</code> = no. of black nodes from root to node.<li><code>$ h(v) $</code> = height of subtree rooted at <code>$ v $</code>.<li><code>$ d $</code> = depth of the tree; <code>$ d \equiv h(\text{root}) $</code>.</ul><p><strong>Claim:</strong> <code>$ N(v) = 2^{bh(v)} - 1 $</code><p><strong>Proof:</strong> By induction. Basis:<p><code>$$ h(v) = 0 \Rightarrow N(v) = 2^0 - 1 = 0 $$</code><p>Then assume that it holds for some <code>$ h(v) = k $</code>. Now define some <code>$ v' $</code> such that <code>$ h(v') = k + 1 $</code>. Then, <code>$ v' $</code> must have two children which might be red or black. Since we&rsquo;re interested in the minimum number of internal nodes, we can take the case that they&rsquo;re black:<p><code>$$ \begin{aligned} N(v') &amp;= (2^{bh(v') - 1} - 1) + (2^{bh(v') - 1} - 1) + 1 \\ &amp;= 2^{bh(v')} - 1 \end{aligned} $$</code><p>Now we see that <code>$ n \geq N(\text{root}) = 2^{d / 2} - 1 $</code>, because <code>$ d / 2 $</code> is the minimum number of black nodes from the root to any leaf node. Then:<p><code>$$ \begin{aligned} \log_2{(n + 1)} &amp;\geq d/2 \\ d &amp;\leq 2\log_2{(n+1)} \end{aligned} $$</code></p><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js></script><script>!function(){function e(e){var t=e.match(a);return t?{TeX:t[1]||t[2],displayMode:!!t[1]}:null}for(var t=document.getElementsByTagName("code"),a=/(?:^\$\$\s*([\s\S]+)\s*\$\$$)|(?:^\$\s*([\s\S]+)\s*\$$)/,s=t.length;s--;){var n=t[s],r=e(n.textContent);r&&(katex.render(r.TeX,n,{displayMode:r.displayMode,throwOnError:!1}),n.classList.add("has-jax"))}}()</script>