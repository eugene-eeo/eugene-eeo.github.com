<!DOCTYPE HTML>
<html>
<head>
  <meta charset='utf8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>
  <link rel='stylesheet' href='styles/document.css'/>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css'/>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js'></script>
  <title>Ring Cover</title>
  <style>
table {
  text-align: center;
  border: 1px solid #000;
}
td {
  border: 1px solid #000;
  padding: 0.25em 0.5em;
}
  </style>
</head>
<body>
  <h1>Ring Cover</h1>
  <p>
    Say we place 5 items in a circle. If we count in 1s, i.e. the
    1st item, then the 2nd, then the 3rd then we will count all
    items by the end of 5 counts. What if instead we counted by 2?
    This is now a bit trickier. Let's call the first item the 0th
    item. Then our count sequence would be like this:

    $$
    0, 2, 4, 1, 3
    $$

  <p>
    So we still <i>cover</i> the ring of all 5 items. Notice that
    because we're counting in a ring we could ignore all items that
    are above 5; so these two count sequences are in some sense,
    the same:

    <center>
    <table>
      <tr>
        <td>0</td>
        <td>2</td>
        <td>4</td>
        <td>6</td>
        <td>8</td>
      </tr>
      <tr>
        <td><b>0</b></td>
        <td><b>2</b></td>
        <td><b>4</b></td>
        <td>5 + <b>1</b></td>
        <td>5 + <b>3</b></td>
      </tr>
    </table>
    </center>

  <p>
    This idea is cleanly encoded in the modulus operator:
    \( 8 \equiv 3 \pmod 5 \) and in general, \(p \equiv q \pmod n\)
    iff \( \exists a,b \in \mathbb{Z} \) s.t. \( p = an + r \) and
    \( q = bn + r \).

  <center>
  <img src="static/ring-cover.png" width="40%"/>
  <figcaption>Ring with \( n = 5 \), \( a = 2 \).</figcaption>
  </center>

  <p>
    Now comes the general question: given \( n \) objects in a ring,
    can we cover the ring if we count by \( a \) each time? Let
    \( F(n, a) \) denote whether we can cover the ring of \( n \)
    objects counting by \( a \).

  <p>
    Let's get some obvious cases out of the way:

    <ul>
      <li>\( a = 0 \) never covers any \( n \). I don't really want to prove this.</li>
      <li>\( a = 1 \) always covers any \( n \).</li>
      <li>If \( n \) is a multiple of \( a \), i.e. \( a \mid n \) then \( a \) doesn't cover \( n \).</li>
    </ul>

  <p>
    Just to warm up, we start off with this observation - if say \( n = 5 \)
    and \( a = 4 \), then our count sequence is:

    $$
    0, 4, 3, 2, 1
    $$

    But this is the same as the count sequence for 1 (\( 0, 1, 2, 3, 4 \)),
    only reversed around 0. Intuitively this makes sense - we're adding in
    a ring of \( n \) elements so it shouldn't matter if we count from
    \( n - a \) or \( a \). Let's prove it:

    <blockquote>
      <b>Claim: \( F(n, a) = F(n, n - a) \)</b><br/>
      <b>Proof:</b> Consider the count sequences for \( a \) and \( n - a \):

      <p>
      <center>
      <table>
        <tr><td>\( 0 \)</td><td>\( 0 \)</td></tr>
        <tr><td>\( a \)</td><td>\( (n-a) \)</td></tr>
        <tr><td>\( 2a \)</td><td>\( 2(n-a) \)</td></tr>
        <tr><td>\( 3a \)</td><td>\( 3(n-a) \)</td></tr>
        <tr><td>\( \vdots \)</td><td>\( \vdots \)</td></tr>
        <tr><td>\( (n-1)a \)</td><td>\( (n-1)(n-a) \)</td></tr>
      </table>
      </center>

      <p>
      Now let's try expanding some of the brackets; expanding the last one on the
      right count sequence gives us:

      $$
      n^2 - an - n + a \equiv a \pmod n
      $$

      This is eerily similar to the second element in the left count sequence.
      Let's try to show that the two sequences are in fact the same, but just
      reversed around 0. What happens if we take the \( (i+1) \)-th element from
      the right sequence?

      $$
      \begin{aligned}
      (n-i)(n-a) &amp;= n^2 - an - in + ia \\
                 &amp;= n(n - a - i) + ia \\
                 &amp;= ia \pmod n
      \end{aligned}
      $$

      And so we have a one-to-one mapping between the two sequences; if one covers
      \( n \) then the second one covers \( n \) as well. \( \Box \)
    </blockquote>

  <p>
    The previous result is a special case of the more general result
    as follows: for any \( b \),

    $$
    F(n, a) = F(n, bn + a)
    $$

    this is easily proven using a similar approach.

  <p>
    Now what happens if our is not a divisor of \( n \)?
    Let's focus on one case first - composite numbers.
    For instance, we know that for \( n = 16 \), we can't cover it with 2 but we
    can cover it with 3. Can we hope to cover it with 6? If we write out the count
    sequence, the answer is no, because we never touch any odd numbered objects.

  <p>
    Since \( a \) is a composite number we can rewrite it as \( a = pq \),
    with suitable values for \( p, q \) - notably, \( 1 \lt p, q \lt a \).

    <blockquote>
      <b>Claim:</b> \( F(n, pq) = F(n, p) \land F(n, q) \)<br/>
      <b>Proof:</b> Let's consider the infinite count sequences for both numbers.

      $$
      \begin{aligned}
      0, p, 2p, \ldots, (q-1)p, qp, \ldots, 2qp, \ldots \\
      0, q, 2q, \ldots, (p-1)q, pq, \ldots, 2pq, \ldots
      \end{aligned}
      $$

      <p>
        From the table we can see that eventually there are common elements
        \( qp \) and \( pq \), \( 2qp \) and \( 2pq \) and so on; in other
        words the count sequence of \( pq \) is given by the <i>intersection</i>
        of these two count sequences.

      <p>
        Now, if any one of the count sequences of \( p \) or \( q \) <i>does not</i>
        cover \( n \) then we are done; the intersection with any other sequence
        will not result in another sequence covering \( n \). If they both cover
        \( n \) then their intersection, the count sequence for \( pq \) <i>also</i>
        covers \( n \). \( \Box \)
    </blockquote>

  <p>
    Now we're only left with prime numbers that do not divide \( n \).
    Some small experiments show that counting using these numbers
    work; for instance \( n = 5, a = 2,3 \), and for \( n = 16 \),
    \( a = 3, 5, 7, 11, 13 \) all work. Let's see if it holds in general:

  <blockquote>
    <b>Claim:</b> if \( a \) is a prime and \( a \nmid n \) then \( a \) covers \( n \).<br/>
    <b>Proof:</b> Consider the count sequence (all taken mod \( n \)):

        $$
        0, a, 2a, 3a, \ldots (n-1)a
        $$

      <p>
        Our claim of coverage is equivalent to saying that there are no two elements that repeat
        themselves in this sequence. Now assume the contrary: this sequence contains some duplicate
        elements \( ja \equiv ia \pmod n \), s.t. \( i \neq j \) and both \( 0 \leq i, j \leq n-1 \).
        Assume, without loss of generality that \( i \lt j \). We can rewrite them as:

        $$
        \begin{aligned}
        ia &amp;= pn + r \\
        ja &amp;= qn + r
        \end{aligned}
        $$

        We can rearrange these around \( r \) and set them to be equal to each other:

        $$
        \begin{aligned}
        ia - pn &amp;= ja - qn \\
        ja - ia &amp;= qn - pn \\
        a(j - i) &amp;= n(q - p)
        \end{aligned}
        $$

        Since \( j \gt i \) (and it follows that \( q \gt p \)), we can rewrite \( j \) and \( q \)
        in terms of \( i \) and \( p \):

        $$
        \begin{aligned}
        j &amp;= i + c \\
        p &amp;= q + d
        \end{aligned}
        $$

        For some \( c,d \gt 0 \). Then we substitute back into our equation:

        $$
        ac = nd
        $$

        Now we know that \( a \) is a prime and doesn't divide \( n \).
        So we can't split up \( a \) into multiples of smaller numbers,
        and we can't express \( n \) in multiples of \( a \).
        Thus any satisfying assignment to this equation has the form
        \( c = fn \) and \( d = fa \) for some \( f \in \mathbb{Z} \).

      <p>
        Since \( c \gt 0 \) we now know that \( f \gt 0 \) and thus
        \( j = i + c = i + fn \gt i + n \gt n - 1 \), a contradiction!
        We find that the prime \( a \) <i>does</i> indeed cover \( n \) if
        \( a \) is not a multiple of \( n \). \( \Box \)
    </blockquote>

  <p>
    <i>In hindsight,</i> the argument above can be tweaked to show the case
    for when \( a \) is a compound number. The same argument can also show
    that if \( a \) and \( n \) are coprime (do not share any common divisors)
    then \( a \) covers \( n \) - this leads to a more direct expression for
    \( F(n,a) \).

  <p>
    So with all these we can finally give an expression for \( F(n,a) \):

    $$
    F(n,a) = \begin{cases}
       false &amp;\text{if } a = 0 \\
       true  &amp;\text{if } a = 1 \\
       false &amp;\text{if } a \mid n \\
       true  &amp;\text{if } a \text{ is prime} \\
       F(n,r)   &amp;\text{if } a = mn + r \land m \gt 0 \\
       F(n,p) \land F(n,q) &amp;\text{otherwise} \\
                           &amp;\text{where } a = pq \land p,q \lt a
    \end{cases}
    $$

    The last case is actually equivalent to taking the prime number decomposition
    of \( a \) and then checking if \( F(n, p) \) holds for each of the primes \( p \).
    One major simplification of the formula follows:

    $$
    F(n,a) = \begin{cases}
      true  &amp;\text{if } \gcd(n,a) = 1 \land a \neq 0, \\
      false &amp;\text{otherwise}
    \end{cases}
    $$

    In other words, \( n \) is covered by \( a \) iff \( n \) and \( a \) are coprime
    and \( a \neq 0 \). Checking this claim case-by-case:

    <ol>
      <li>\( a = 0 \): trivial.</li>
      <li>\( a = 1 \): \( \gcd(n, 1) = 1 \) for any integer \( n \).</li>
      <li>\( a \mid n \): \( a = nm \), \( \gcd(n, a) = \gcd(n, mn) = mn \neq 1 \).</li>
      <li>\( a \) is prime: \( \gcd(n, a) = 1 \) iff \( a \) doesn't divide \( n \).</li>
      <li>\( F(n,a) = F(n, a \mod n) \): the \( \gcd \) equivalent is a well-known result.</li>
      <li>\( F(n,pq) = F(n, p) \land F(n, q) \):<br/>
        <i>We prove one case; the rest is similar:</i>
        If \( \gcd(n,p) = 1 \) and \( \gcd(n,q) = 1 \) then \( \gcd(n,pq) = 1 \).
        If \( p \) and \( q \) do not have any primes in common with \( n \), then
        the set of primes that make up \( pq \) is the union of the two sets which
        again have no primes in common with \( n \).
      </li>
    </ol>

    <p>
    Using this simplification means that we get some things for free, e.g.
    \( F(n,a) = F(a,n) \) and also that there exists well-known, fast
    algorithms to compute an answer.

  <script>renderMathInElement(document.body);</script>
</body>
</html>
