<!DOCTYPE HTML>
<html>
<head>
  <meta charset='utf8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>
  <link rel='stylesheet' href='styles/document.css'/>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css'/>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js'></script>
  <title>Ring Cover</title>
  <style>
table {
  text-align: center;
  border: 1px solid #000;
}
td {
  border: 1px solid #000;
  padding: 0.25em 0.5em;
}
  </style>
</head>
<body>
  <h1>Ring Cover</h1>
  <p>
    Say we place 5 items in a circle. If we count in 1s, i.e. the
    1st item, then the 2nd, then the 3rd then we will count all
    items by the end of 5 counts. What if instead we counted by 2?
    This is now a bit trickier. Let's call the first item the 0th
    item. Then our count sequence would be like this:

    $$
    0, 2, 4, 1, 3
    $$

  <p>
    So we still <i>cover</i> the ring of all 5 items. Notice that
    because we're counting in a ring we could ignore all items that
    are above 5; so these two count sequences are in some sense,
    the same:

    <center>
    <table>
      <tr>
        <td>0</td>
        <td>2</td>
        <td>4</td>
        <td>6</td>
        <td>8</td>
      </tr>
      <tr>
        <td><b>0</b></td>
        <td><b>2</b></td>
        <td><b>4</b></td>
        <td>5 + <b>1</b></td>
        <td>5 + <b>3</b></td>
      </tr>
    </table>
    </center>

  <p>
    This idea is cleanly encoded in the modulus operator:
    \( 8 \equiv 3 \pmod 5 \) and in general, \(p \equiv q \pmod n\)
    iff \( \exists a,b \in \mathbb{Z} \) s.t. \( p = an + r \) and
    \( q = bn + r \).

  <center>
  <img src="static/ring-cover.png" width="40%"/>
  <figcaption>Ring with \( n = 5 \), \( a = 2 \).</figcaption>
  </center>

  <p>
    Now comes the general question: given \( n \) objects in a ring,
    can we cover the ring if we count by \( a \) each time? Let
    \( F(n, a) \) denote whether we can cover the ring of \( n \)
    objects counting by \( a \).

  <p>
    Let's get some obvious cases out of the way:

    <ul>
      <li>\( a = 0 \) never covers any \( n \). I don't really want to prove this.</li>
      <li>\( a = 1 \) always covers any \( n \).</li>
      <li>If \( n \) is a multiple of \( a \), i.e. \( a \mid n \) then \( a \) doesn't cover \( n \).</li>
    </ul>

  <p>
    Now we ask the following: if we count using a prime number,
    do we cover all values of \( n \), given that \( a \) does
    not divide \( n \)? Well this <i>should</i> be true; it does
    hold for simple examples like \( n = 5, a = 2,3 \). Let's
    see if it holds in general:

  <blockquote>
    <b>Claim:</b> if \( a \) is a prime and \( a \nmid n \) then \( a \) covers \( n \).<br/>
    <b>Proof:</b> Consider the count sequence (all taken mod \( n \)):

        $$
        0, a, 2a, 3a, \ldots (n-1)a
        $$

      <p>
        Our claim of coverage is equivalent to saying that there are no two elements that repeat
        themselves in this sequence. Now assume the contrary: this sequence contains some duplicate
        elements \( ja \equiv ia \pmod n \), s.t. \( i \neq j \) and both \( ia \) and \( ja \) are \( \leq (n-1)a \).
        Assume that \( i \lt j \). We can rewrite them as:

        $$
        \begin{aligned}
        ia &amp;= pn + r \\
        ja &amp;= qn + r
        \end{aligned}
        $$

        We can rearrange these around \( r \) and set them to be equal to each other:

        $$
        \begin{aligned}
        ia - pn &amp;= ja - qn \\
        ja - ia &amp;= qn - pn \\
        a(j - i) &amp;= n(q - p)
        \end{aligned}
        $$

        Since \( j \gt i \) (and it follows that \( q \gt p \)), we can rewrite \( j \) and \( q \)
        in terms of \( i \) and \( p \):

        $$
        \begin{aligned}
        j &amp;= i + c \\
        p &amp;= q + d
        \end{aligned}
        $$

        For some \( c,d \gt 0 \). Then we substitute back into our equation:

        $$
        ac = nd
        $$

        Now we know that \( a \) is a prime and doesn't divide \( n \).
        So we can't split up \( a \) into multiples of smaller numbers,
        and we can't express \( n \) in multiples of \( a \).
        Thus any satisfying assignment to this equation is has the property that
        \( c \) is a multiple of \( n \) and
        \( d \) a multiple of \( a \).

      <p>
        Since \( c \gt 0 \) we now know that \( j \) is \( i \) plus some multiple of \( n \).
        Thus \( j \gt n - 1 \), contradiction! We find that the prime \( a \) <i>does</i>
        indeed cover \( n \) if \( a \) is not a multiple of \( n \). \( \Box \)
    </blockquote>

  <p>
    We then can ease our lives with this observation - if say \( n = 5 \)
    and \( a = 4 \), then our count sequence is:

    $$
    0, 4, 3, 2, 1
    $$

    But this is the same as the count sequence for 1: \( 0, 1, 2, 3, 4 \)
    but reversed around 0. Intuitively this makes sense - since we're adding
    in a ring of \( n \) elements it shouldn't matter if we count from \( n - b \)
    or \( b \). Let's prove it:

    <blockquote>
      <b>Claim: \( F(n, a) = F(n, n - a) \)</b><br/>
      <b>Proof:</b> Consider the count sequences for \( a \) and \( n - a \):

      <p>
      <center>
      <table>
        <tr><td>\( 0 \)</td><td>\( 0 \)</td></tr>
        <tr><td>\( a \)</td><td>\( (n-a) \)</td></tr>
        <tr><td>\( 2a \)</td><td>\( 2(n-a) \)</td></tr>
        <tr><td>\( 3a \)</td><td>\( 3(n-a) \)</td></tr>
        <tr><td>\( \vdots \)</td><td>\( \vdots \)</td></tr>
        <tr><td>\( (n-1)a \)</td><td>\( (n-1)(n-a) \)</td></tr>
      </table>
      </center>

      <p>
      Now let's try expanding some of the brackets; expanding the last one on the
      right count sequence gives us:

      $$
      n^2 - an - n + a \equiv a \pmod n
      $$

      This is eerily similar to the second element in the left count sequence.
      Let's try to show that the two sequences are in fact the same, but just
      reversed around 0. What happens if we take the \( (i+1) \)-th element from
      the right sequence?

      $$
      \begin{aligned}
      (n-i)(n-a) &amp;= n^2 - an - in + ia \\
                 &amp;= n(n - a - i) + ia \\
                 &amp;= ia \pmod n
      \end{aligned}
      $$

      And so we have a one-to-one mapping between the two sequences; if one covers
      \( n \) then the second one covers \( n \) as well. \( \Box \)
    </blockquote>

  <p>
    The previous result is a special case of the more general result
    as follows: for any \( b \),

    $$
    F(n, a) = F(n, bn + a)
    $$

    this is easily proven using a similar approach.

  <p>
    Now what happens if our number is neither a prime nor a divisor of \( n \)?
    For instance, we know that for \( n = 16 \), we can't cover it with 2 but we
    can cover it with 3. Can we hope to cover it with 6? Intuitively again the
    answer is no; we never touch any odd numbered objects.

  <p>
    So for any such \( a \), we must have that \( a \) is a composite number (not a prime).
    We can rewrite \( a \) as \( pq \). Then we claim that for \( 1 \lt p,q \lt a \):

    <blockquote>
      <b>Claim:</b> \( F(n, pq) = F(n, p) \land F(n, q) \)<br/>
      <b>Proof:</b> Let's consider the infinite count sequences for both numbers.

      $$
      \begin{aligned}
      0, p, 2p, \ldots, (q-1)p, qp, \ldots, 2qp, \ldots \\
      0, q, 2q, \ldots, (p-1)q, pq, \ldots, 2pq, \ldots
      \end{aligned}
      $$

      <p>
        From the table we can see that eventually there are common elements
        \( qp \) and \( pq \), \( 2qp \) and \( 2pq \) and so on; in other
        words we are interested in the <i>intersection</i> of these two count
        sequences.

      <p>
        Now, if any one of the count sequences of \( p \) or \( q \) <i>does not</i>
        cover \( n \) then we are done; the intersection with any other sequence
        will not result in another sequence covering \( n \). If they both cover
        \( n \) then their intersection, the count sequence for \( pq \) <i>also</i>
        covers \( n \). \( \Box \)
    </blockquote>

  <p>
    So with all these in mind we can finally give a "nice" expression
    for \( F(n,a) \):

    $$
    F(n,a) = \begin{cases}
       false &amp;\text{if } a = 0 \\
       true  &amp;\text{if } a = 1 \\
       false &amp;\text{if } a \mid n \\
       true  &amp;\text{if } a \text{ is prime} \\
       F(n,r)   &amp;\text{if } a = mn + r \land m \gt 0 \\
       F(n,p) \land F(n,q) &amp;\text{otherwise} \\
                           &amp;\text{where } a = pq \land p,q \lt a
    \end{cases}
    $$

    The last case is actually equivalent to taking the prime number decomposition
    of \( a \) and then checking if \( F(n, p) \) holds for each of the primes \( p \).
    One major simplification of the formula follows:

    $$
    F(n,a) = \begin{cases}
      true  &amp;\text{if } \gcd(n,a) = 1 \text{ and } a \neq 0, \\
      false &amp;\text{otherwise}
    \end{cases}
    $$

    In other words, \( n \) is covered by \( a \) iff \( n \) and \( a \) are coprime.
    Checking this claim case-by-case:

    <ol>
      <li>\( a = 0 \): trivial.</li>
      <li>\( a = 1 \): \( gcd(n, 1) = 1 \) for any integer \( n \).</li>
      <li>\( a \mid n \): \( gcd(n, a) = ma \neq 1 \) for some integer \( m \).</li>
      <li>\( a \) is prime: \( gcd(n, a) = 1 \) iff \( a \) doesn't divide \( n \).</li>
      <li>\( F(n,a) = F(n, a \mod n) \) is a well-known result from the \( \gcd \) function.</li>
      <li>\( F(n,pq) = F(n, p) \land F(n, q) \):<br/>
        If \( \gcd(n,p) = 1 \) and \( \gcd(n,q) = 1 \) then \( \gcd(n,pq) = 1 \).
        This is a well known result and we prove one aspect of it as follows: if \( p \)
        and \( q \) do not have any primes in common with \( n \), then
        the set of primes that make up \( pq \) is the union of those two
        sets, which again have no primes in common with \( n \).
      </li>
    </ol>

    <p>
    Using this simplification means that we get some things for free, e.g.
    \( F(n,a) = F(a,n) \) and also that there exists well-known, fast
    algorithms to compute an answer.

  <script>renderMathInElement(document.body);</script>
</body>
</html>
